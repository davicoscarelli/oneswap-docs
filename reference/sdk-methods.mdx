---
title: SDK methods
description: Every method available in the OneSwap SDK.
---

## Setup

```typescript
import { OneSwap } from '@oneswap/sdk'
const client = new OneSwap({ apiKey: 'os_live_...' })
```

| Option | Type | Default | Description |
|---|---|---|---|
| `apiKey` | `string` | required | Your API key |
| `timeout` | `number` | `30000` | Request timeout in ms |

---

## Pools

| Method | Description |
|---|---|
| `client.pools.list()` | All pools with reserves, fee, LP supply |
| `client.pools.get(poolId)` | Pool detail with `swapAddress` and `lpAddress` |
| `client.pools.getStats(poolId)` | `apr`, `apy`, `volume24h`, `fees24h`, `lpFees24h`, `tvl`, `swapCount24h` |

## Tokens

| Method | Description |
|---|---|
| `client.tokens.list()` | Available tokens with `name` and `admin` |

## Quotes

| Method | Description |
|---|---|
| `client.quotes.get({ from, to, amount })` | Price quote (valid 30s). Includes `estimatedTrafficCost` and `inputAmountAfterTrafficFee`. Returns 400 if amount is below traffic cost minimum. |

## Wallets

| Method | Description |
|---|---|
| `client.wallets.create({ walletAddress })` | Create custodial wallet |
| `client.wallets.get(walletAddress)` | Get wallet by wallet address |
| `client.wallets.list()` | List all wallets |
| `client.wallets.getBalances(walletAddress)` | Token balances for a wallet |

## Swaps

| Method | Description |
|---|---|
| `client.swaps.create(params)` | Create swap intent |
| `client.swaps.getStatus(intentId)` | Poll swap status |
| `client.swaps.list(params?)` | List swaps (filter by `status`, `limit`, `offset`) |

### `swaps.create` params

| Param | Required | Description |
|---|---|---|
| `fromToken` | yes | Input token (e.g. `'Amulet'`) |
| `toToken` | yes | Output token (e.g. `'USDCx'`) |
| `amount` | yes | Input amount |
| `slippageTolerance` | no | `0.001`–`0.5`, default `0.01` |
| `walletAddress` | no | Use custodial wallet |
| `senderParty` | no | Custom Canton party |
| `outputAddress` | no | Send output to different address |

### SwapIntent object

Extends `EventEmitter`. Properties: `intentId`, `depositAddress`, `expectedOutput`, `minOutput`, `expiresAt`, `instructions`.

| Method / Event | Description |
|---|---|
| `swap.wait(opts?)` | Await terminal state |
| `'matched'` | Deposit detected |
| `'completed'` | Swap done |
| `'slippage_failed'` | Refunded — price moved beyond tolerance |
| `'insufficient_amount'` | Refunded — input below network traffic cost |
| `'insufficient_liquidity'` | Refunded — not enough liquidity |
| `'expired'` | Timed out |

## Liquidity

| Method | Description |
|---|---|
| `client.liquidity.create(params)` | Create LP intent |
| `client.liquidity.getStatus(intentId)` | Poll LP status |
| `client.liquidity.list(params?)` | List LP intents (filter by `status`, `limit`, `offset`) |
| `client.liquidity.withdraw(params)` | Withdraw liquidity (full or partial) |

### `liquidity.create` params

| Param | Required | Description |
|---|---|---|
| `poolId` | yes | Target pool |
| `amountA` | yes | Token A amount |
| `amountB` | yes | Token B amount |
| `walletAddress` | no | Use custodial wallet |
| `senderParty` | no | Custom Canton party |

### LpIntent object

Extends `EventEmitter`. Properties: `intentId`, `depositAddress`, `lpAddress`, `expiresAt`, `instructions`.

| Method / Event | Description |
|---|---|
| `lp.wait(opts?)` | Await terminal state |
| `'partial'` | One token received |
| `'completed'` | LP minted |
| `'expired'` | Timed out |

### `liquidity.withdraw` params

| Param | Required | Description |
|---|---|---|
| `poolId` | yes | Pool to withdraw from |
| `ownerParty` | yes | Canton party that owns the LP tokens |
| `amount` | no | LP tokens to withdraw (defaults to full balance) |
| `destinationParty` | yes | Canton party to receive withdrawn tokens |

Returns `WithdrawResponse` with `lpTokensWithdrawn`, `returnedA`, `returnedB`, `tokenA`, `tokenB`.

## Positions

| Method | Description |
|---|---|
| `client.positions.list(walletAddress)` | LP positions with share %, value |
| `client.positions.getEarnings(walletAddress, poolId)` | APR, APY, daily/monthly/yearly estimates |

## History

| Method | Description |
|---|---|
| `client.history.list(params?)` | All swaps + LP intents (`limit`, `offset`) |

## Track

| Method | Description |
|---|---|
| `client.track(partyId)` | All swaps + LP for a Canton party |

## Fee Earnings

| Method | Description |
|---|---|
| `client.fees.getEarnings()` | Current fee share config, accumulated fees, and total collected |
| `client.fees.getEarningsHistory(params?)` | Paginated list of individual fee events |
| `client.fees.getCollections(params?)` | Paginated list of fee collections (payouts) |

### `fees.getEarningsHistory` params

| Param | Required | Description |
|---|---|---|
| `page` | no | Page number (default `1`) |
| `limit` | no | Results per page (default `50`, max `100`) |
| `token` | no | Filter by token name (e.g. `'CC'`) |

### `fees.getCollections` params

| Param | Required | Description |
|---|---|---|
| `page` | no | Page number (default `1`) |
| `limit` | no | Results per page (default `50`, max `100`) |

### `fees.getEarnings` response

| Field | Type | Description |
|---|---|---|
| `feeSharePct` | `number \| null` | Your fee share as a decimal (e.g. `0.25` = 25%) |
| `feeWallet` | `string \| null` | Canton party ID for fee collection |
| `accumulated` | `Record<string, string>` | Pending fees by token |
| `totalCollected` | `Record<string, string>` | Lifetime collected fees by token |
| `recentEvents` | `FeeEvent[]` | Last 20 fee events |
